<div ng-controller="contactController">
    <section class="input-group">
        <span class="glyphicon glyphicon-search input-group-addon"></span>
        <input type="text" name="query" id="query" class="form-control" placeholder="Search for..." ng-model="queryText" />
    </section>
    <section>
        <ul class="list-group">
            <li class="list-group-item" ng-repeat="ct in contacts | filter: queryText">
                <div ng-show="!ct.editZone">
                    <p>
                        {{ct.name}} - {{ct.email}}
                    </p>
                    <input type="button" id="edit" value="Edit" ng-click="edit(ct)" class="btn btn-primary" />
                </div>
                <div ng-show="ct.editZone">
                    <form action="#" method="post" class="form-horizontal" ng-submit="update($event, editContact)">
                        <input type="hidden" name="contactId" id="contactId" ng-model="editContact._id" />
                        <div class="form-group">
                            <label for="contactName" class="control-label col-sm-2">Name</label>
                            <div class="col-sm-10">
                                <input type="text" name="contactName" id="contactName" class="form-control" ng-model="editContact.name" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="email" class="control-label col-sm-2">Email</label>
                            <div class="col-sm-10">
                                <input type="text" name="email" id="email" class="form-control" ng-model="editContact.email" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="age" class="control-label col-sm-2">Age</label>
                            <div class="col-sm-10">
                                <input type="number" name="age" id="age" class="form-control" ng-model="editContact.age" />
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="submit" value="Update contact" class="btn btn-primary" />
                        </div>
                    </form>
                </div>

            </li>
        </ul>
    </section>
    <section>
        <form action="#" method="post" name="contactForm" ng-submit="add($event, contact)" novalidate>
            <div class="form-group" ng-class="{'has-error': contactForm.contactName.$touched && contactForm.contactName.$invalid}">
                <label for="contactName">Name</label>
                <input type="text" name="contactName" id="contactName" class="form-control" ng-model="contact.contactName" required />
                <div class="help-block" ng-messages="contactForm.contactName.$error" ng-show="contactForm.contactName.$touched">
                    <span ng-message="required">Contact name is required</span>
                </div>
            </div>
            <div class="form-group" ng-class="{'has-error': contactForm.email.$touched && contactForm.email.$invalid}">
                <label for="email">Email</label>
                <input type="email" name="email" id="email" class="form-control" ng-model="contact.email" required />
                <div class="help-block" ng-messages="contactForm.email.$error" ng-show="contactForm.email.$touched">
                    <span ng-message="required">Email is required</span>
                    <span ng-message="email">Emial is invalid</span>
                </div>
            </div>
            <div class="form-group" ng-class="{'has-error': contactForm.age.$touched && contactForm.age.$invalid}">
                <label for="age">Age</label>
                <input type="number" name="age" id="age" class="form-control" ng-model="contact.age" required />
                <div class="help-block" ng-messages="contactForm.age.$error" ng-show="contactForm.age.$touched">
                    <span ng-message="required">Age is required</span>
                </div>
            </div>
            <div class="form-group">
                <input type="submit" value="Add contact" class="btn btn-primary" ng-disabled="contactForm.$invalid" />
            </div>
        </form>

    </section>
</div>